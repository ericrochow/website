
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet/less" type="text/css" href="https://ericroc.how/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="https://ericroc.how/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://ericroc.how/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ericroc.how/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ericroc.how/theme/font-awesome/css/solid.css">
  <!--<link rel="stylesheet" type="text/css" href="https://ericroc.how/theme/font-awesome/css/all.css">-->





<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-135617138-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

    <meta name="author" content="Eric Rochow" />
    <meta name="description" content="" />
<meta property="og:site_name" content="Eric Rochow"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Eric Rochow"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ericroc.how"/>
<meta property="og:image" content="https://ericroc.how/images/face.png">

  <title>Eric Rochow &ndash;     Category Containers
</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://ericroc.how">
        <img src="https://ericroc.how/images/face.png" alt="Eric Rochow" title="Eric Rochow">
      </a>
      <h1><a href="https://ericroc.how">Eric Rochow</a></h1>


      <nav>
        <ul class="list">
          <li><a href="https://ericroc.how/pages/about-me.html#about-me">About Me</a></li>
          <li><a href="https://ericroc.how/pages/read-with-me.html#read-with-me">Read With Me</a></li>

          <li><a href="http://resume.ericroc.how" target="_blank">Resume</a></li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-globe" href="https://ericroc.how" target="_blank">
            <i class="fas fa-globe">
            </i>
          </a></li>
          <li>
            <a  class="sc-envelope" href="mailto:ericrochow@gmail.com" target="_blank">
            <i class="fas fa-envelope">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="https://ericroc.how" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/erochow/" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/ericrochow" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/eric_rochow" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-lastfm" href="https://www.last.fm/user/ericrochow" target="_blank">
            <i class="fab fa-lastfm">
            </i>
          </a></li>
          <li>
            <a  class="sc-spotify" href="https://open.spotify.com/user/ericrochow?si=KEmxAAk8QZy31L82MMge4g" target="_blank">
            <i class="fab fa-spotify">
            </i>
          </a></li>
          <li>
            <a  class="sc-book" href="https://www.goodreads.com/user/show/18841479-eric-rochow" target="_blank">
            <i class="fas fa-book">
            </i>
          </a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://ericroc.how">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


    </nav>



<article>
  <header>
    <h2><a href="https://ericroc.how/mounting-devices-in-lxd.html#mounting-devices-in-lxd">Mounting Devices in LXD</a></h2>
    <p>
          Posted on Sat 25 January 2020 in <a href="https://ericroc.how/category/containers.html">Containers</a>


          &#8226;     Tagged with

              <a href="https://ericroc.how/tag/containers.html">containers</a>,              <a href="https://ericroc.how/tag/lxd.html">lxd</a>,              <a href="https://ericroc.how/tag/linux.html">linux</a>
    </p>
  </header>
  <div>
      <h1>Working with Devices in LXD</h1>
<p>Some use cases for containers depend on passing devices through from the host system into the container. This can allow you to do anything from mount you home directory to passing through a USB device.</p>
<h2>Adding Devices in LXD</h2>
<h3>NIC</h3>
<p>Mounting a NIC device on the container allows a host system network interface (physical or logical) to the container. <a href="/lxd_networking.html">See here for more detail</a>. <strong>NOTE!</strong> Mounting the NIC to the container will cause the interface to disappear from the host system as it now "belongs" to the container. Make sure before you do this that nothing on your host system is utilizing the device intended to be mounted!</p>
<h4>Command</h4>
<div class="highlight"><pre><span></span><span class="err">lxc config device add $ctr_name $dev_name nic parent=$parent_iface_name</span>
</pre></div>


<h4>Example</h4>
<div class="highlight"><pre><span></span><span class="err">lxc config device add app1 eth99 nic parent=enp3s0</span>
</pre></div>


<p>The above will take the network interface <code>enp3s0</code> from the host system and attach it to the container <code>app1</code> as network interface <code>eth99</code>.</p>
<p><a href="#markdown-header-apply-configuration-changes-to-container">Apply the configuration to the container</a></p>
<h3>Disk</h3>
<p>The <code>disk</code> device type is probably the most straightforward of the device types and the one I most often use. This allows a directory on the host system to also be mounted in the container itself to either share between containers or to maintain state in the example of an ephemeral container.</p>
<h4>Command</h4>
<div class="highlight"><pre><span></span><span class="err">lxc config device add $ctr_name $dev_name disk source=/path/to/host/dir path=/path/to/ctr/mount/point</span>
</pre></div>


<p><a href="#markdown-header-apply-configuration-changes-to-container">Apply the configuration to the container</a></p>
<h4>Example</h4>
<p>To mount a home drive from the host system to the container named app1:</p>
<div class="highlight"><pre><span></span><span class="err">lxc config device add app1 home_directory disk source=/home/eric path=/home/ubuntu</span>
</pre></div>


<p>This creates a <code>disk</code> device named <code>home_directory</code> and attaches it to the …</p>
        <br>
        <a class="btn" href="https://ericroc.how/mounting-devices-in-lxd.html#mounting-devices-in-lxd">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://ericroc.how/lxd-networking.html#lxd-networking">LXD Networking</a></h2>
    <p>
          Posted on Fri 06 September 2019 in <a href="https://ericroc.how/category/containers.html">Containers</a>


          &#8226;     Tagged with

              <a href="https://ericroc.how/tag/lxd.html">lxd</a>,              <a href="https://ericroc.how/tag/containers.html">containers</a>,              <a href="https://ericroc.how/tag/linux.html">linux</a>,              <a href="https://ericroc.how/tag/networking.html">networking</a>
    </p>
  </header>
  <div>
      <h1>LXD Networking</h1>
<p>Starting in LXD 2.3 there has been quite a bit of network functionality exposed to the operator. As before 2.3 there is the default <code>lxdbr0</code> bridge created when LXD is installed on the host system, but several other options exist.</p>
<h2>LXD Bridges</h2>
<h3>Using the Default LXD Bridge</h3>
<p>First things first, let's go over the default bidge and what it gives you. Out of the box, any new containers will be attached to this bridge and the host system will be configured to NAT oubound connections using the default IP address of the host system via iptables MASQUERADE rules. IP addresses will be assigned to new containers using a built-in DHCP server using the range provided during the LXD init process. If you're looking to keep things simple, just stick with the default bridge.</p>
<h3>Creating a Custom LXD Bridge</h3>
<p>If for some reason the default bridge does not suffice (e.g. the network namespaces need to be segregated, differing requirements for addressing or NAT behavior, etc), it is possible to create a new bridge. There are a few different options for configuring a bridge.</p>
<p>To create an autoconfigured bridge named lxdbr1337:</p>
<div class="highlight"><pre><span></span><span class="err">root@host# lxc network create lxdbr1337</span>
</pre></div>


<p>To configure the bridge by hand:</p>
<div class="highlight"><pre><span></span><span class="err">root@host# lxc network create lxdbr1337 ipv6.address=none ipv4.address=10.13.37.1/24 ipv4.nat=true</span>
</pre></div>


<p>This will create a new bridge call <code>lxdbr1337</code> with IPv6 disabled and an IPv4 address of 10.13.31.1, will create MASQUERADE rules in iptables to NAT outbound traffic. The built-in DHCP server will hand out addresses to containers attached to the bridge from the range 10.13.37.0/24 (i.e. 10 …</p>
        <br>
        <a class="btn" href="https://ericroc.how/lxd-networking.html#lxd-networking">    Continue reading
</a>
  </div>
</article>

  <div class="pagination">
  </div>




    <footer>
<p>&copy; Eric Rochow 2020</p>
    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Eric Rochow ",
  "url" : "https://ericroc.how",
  "image": "https://ericroc.how/images/face.png",
  "description": ""
}
</script>

</body>
</html>